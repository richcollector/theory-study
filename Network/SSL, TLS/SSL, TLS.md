## SSL(Security Socket Layer), TLS(Transfer Layer Security)

### SSL (Security Socket Layer)

- 인터넷을 통해 전달되는 정보 보안의 안전한 거래를 사용하기 위해 Netscape사에서 개발한 인터넷 통신 규약

- 90년대 중반 폐기된 프로토콜 (보안 이슈로 TLS로 사용)

- SSL 계층은 응용 프로그램 계층과 전송 계층 사이에 위치

### 실행순서

- 응용 프로그램 계층 데이터가 SSL 계층에 전달
- SSL 계층은 응용 프로그램 계층에서 수신한 데이터에 대한 암호화를 수행
- 암호화된 데이터에 SSL 헤더(SH)라는 자체 암호화 정보 헤더를 추가
- SSL 계층 데이터는 전송 계층(TCP/UDP)에 대한 입력
- SSL 인증서를 복호화하는 것도 암호화하는 요소에 포함

#### SSL 인증서?

쉽게 말하면, 사용자가 방문하는 사이트가 믿을 만한 사이트인가? 라는 것을 증명해주는 '정품 인증'같은 것입니다

CA는 서버 운영 기업이 넘겨진 공개키를 인증서 발급자, CA의 이름 등과 함께 묶어서 CA가 가지고 있는 개인키로 암호화해서 SSL인증서로 발급합니다.

### TLS (Transfer Layer Security)

- SSL 3.0을 기초로해서 IETF가 만든 프로토콜

- 보안 및 개인 정보 보호 기능이 강화된 후속 인터넷 표준

- TLS는 단일 프로토콜이 아니고 2계층에 걸친 프로토콜

  - Handshake 프로토콜

    Handshake 프로토콜은 통신 당사자 간의 초기 연결 및 보안 매개 변수 협상을 담당합니다.
    클라이언트와 서버가 처음 연결할 때, Handshake 프로토콜이 클라이언트 인증, 서버 인증, 암호화 알고리즘 협상, 세션 키 교환 등의 작업을 수행합니다. 이를 통해 양측은 안전한 통신을 위한 초기 설정을 마치고, 서로가 신뢰할 수 있는지를 확인합니다.

  - Record 프로토콜

    Record 프로토콜은 Handshake에서 협상된 보안 매개 변수를 사용하여 데이터의 암호화, 복호화, 무결성 검사를 수행합니다.
    Handshake 과정을 통해 얻은 세션 키를 사용하여 실제 데이터를 보호합니다. Record 프로토콜은 페이로드 데이터에 대한 암호화, 복호화, 압축, 해시 등의 작업을 담당하여 안전한 데이터 전송을 보장합니다.

  이렇게 Handshake 프로토콜과 Record 프로토콜이 함께 작동하여 TLS는 안전한 통신을 제공합니다. Handshake는 초기 연결 설정과 보안 매개 변수 협상을 담당하며, Record는 실제 데이터의 보안 처리를 담당합니다. 이 다단계 프로토콜 구조를 통해 TLS는 안전한 통신을 위한 강력한 보안 기능을 제공할 수 있습니다.

### SSL, TLS의 암호화하는 방식

결론적으로 SSL, TLS 암호화는 공유키와 공개키 방식을 둘다 사용합니다.

전자 인증서에는 CA, 서버에 대한 정보, 공개키, 전자서명을 가지고 있습니다.

- 클라이언트가 서버에 연결 요청

- 서버가 클라이언트에게 자신을 증명할 수 있고, 서로의 데이터를 암호화할 수 있는 전자 인증서를 전송
  몇 가지 방법이 있긴 하지만 비밀키는 CA에서 주는 것으로 사용
  즉, 서버가 전자 인증서를 클라이언트에 보냄으로써 클라이언트와 서버가 동시에 공개키를 소유

- 클라이언트에서 난수를 생성해 공개키를 사용하여 난수를 암호화 (이 암호화된 내용이 공유키)

- 공유키를 서버로 전송 (그 다음 통신부터는 공유키로 암호화된 데이터만 주고 받음)

공유키가 없는 처음 한번만 공유키를 서버에 줄 때 그 한번에 해당 공유키를 탈취당할 경우 말고는 그 이후의 통신부터는 데이터만 주고받기 때문에 보안성을 어느정도 지키면서도 공유키의 장점인 빠른 속도로 통신한다는 장점을 해당 방법에 사용합니다.

공유키를 만들기 위해 공개키와 난수의 계산은 리소스가 크기 때문에 처음 통신 한번일때만 실행합니다.

여기서 공유키는 대칭키이고, 공개키는 비대칭키라고 합니다.

### TLS의 보완내용

- 암호 알고리즘 강화

  TLS는 더 강력하고 안전한 암호 알고리즘을 도입하여 데이터의 기밀성과 무결성을 보호합니다. 예를 들어, SSLv3에서 사용된 DES(Data Encryption Standard)와 같은 취약한 알고리즘 대신에 AES(Advanced Encryption Standard)와 같은 안전한 알고리즘을 사용합니다.

- 암호 스위트 다양성

  TLS는 다양한 암호 스위트(cipher suites)를 지원하여 통신 당사자들이 안전한 암호화 및 인증 메커니즘을 선택할 수 있게 합니다. 이는 보안 강화와 상호 운용성을 향상시키는 데 도움이 됩니다.

- 취약한 취소 방지

  TLS에서는 SSL의 POODLE(Padding Oracle On Downgraded Legacy Encryption)과 같은 취약점을 방지하기 위해 새로운 기능을 도입했습니다. 예를 들어, 블록 암호 운용 모드의 채널 바운드(cipher-suite)를 통해 이러한 공격을 방어합니다.

- Perfect Forward Secrecy (PFS)

  TLS에서는 Perfect Forward Secrecy를 지원하여 한 번의 키 유출이 과거의 통신 내용을 해독하는 데 사용될 수 있는 위험을 감소시킵니다. 이는 장기간에 걸쳐 사용되는 키가 유출되어도 이전 통신이 안전하게 보호되는 것을 의미합니다.

이러한 기술적인 개선 및 보완을 통해 TLS는 SSL의 일부 보안 이슈를 극복하고 안전한 통신을 지원하게 되었습니다. 그 결과로 현대의 웹 보안에서는 TLS를 사용하는 것이 일반적입니다.

### 참고자료

- [SSL(Security Socket Layer), TLS(Transfer Layer Security)](https://github.com/esperar/estudy/blob/master/Back-End/Internet/ssl_tls.md)
