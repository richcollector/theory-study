## 호이스팅(Hoisting)

호이스팅이란 "끌어올린다" 라는 뜻으로 변수 및 함수 선언문이 스코프 내의 최상단으로 끌어올려지는 현상을 말한다. 여기서 주의할 점은 "선언문" 이라는 것이며 "대입문"은 끌어올려지지 않는다.

- 변수 선언 단계

  - 선언단계

    선언한 변수를 식별자(변수명)가 담기는 객체에 할당하는 단계

  - TDZ (Temporal Dead Zone)

    선언단계와 초기화단계 사이에 있는 구역이며, Let과 Const는 선언단계와 초기화단계가 분리 되어 TDZ에 머무르게 된다. 할당되는 변수를 만나기 전까지 TDZ에 있음

  - 초기화단계

    변수에 할당할 메모리 공간을 부여하는 단계

  - 변수var

    선언과 초기화단계 둘 다 되어버린다. 메모리를 할당 받아 버려 에러를 검출하기 어렵다.

  - 할당단계

    정의된 변수에 데이터가 할당되는 단계

  - 함수 선언식

    선언, 초기화, 할당까지 되어버린다.
    function fn1() {}

아래 코드를 보자.

```jsx
console.log(a);
var a = 2;
```

컴파일러는 자바스크립트 엔진이 **인터프리팅(Interpreting)**을 하기 전에 컴파일을 하는데 이 때, var a = 2; 를 2개의 구문으로 본다.

- var a
- a = 2
  var a 는 변수 선언문으로 컴파일을 할 때 처리하고, a = 2 는 실행할 때까지 내버려둔다. 따라서, 변수 a는 호이스팅 되고 콘솔에는 다음과 같은 결과가 나온다.

`undefined`
함수 선언문의 경우도 호이스팅 된다.

```jsx
func();
function func() {
  console.log("함수 호이스팅");
}
```

### 함수 호이스팅

- 함수 표현식(Function Expression)은 호이스팅 되지 않는다.

```jsx
func();
var func = function () {};
```

여기서는 변수 func의 호이스팅이 발생해서 참조할 수는 있기 때문에 ReferenceError가 발생하지 않지만 그 값이 undefined 이기 때문에 TypeError가 발생한다.

- 함수와 변수 선언문 중에는 함수 선언문이 먼저다.

```jsx
func();
var func = function () {
  console.log("변수 호이스팅");
};
function func() {
  console.log("함수 호이스팅");
}
```

동일한 이름으로 함수 선언문과 변수 선언문(= 함수표현식)이 있지만 함수 선언문의 호이스팅이 먼저이다.

### 용어 설명

- 인터프리팅(Interpreting)

  컴파일과 다르게 소스 코드를 한 번에 읽어서 번역하지 않고, 런타임 상태의 소스코드를 한 줄 한 줄 번역하면서 프로그램을 구동하는 방식입니다. 한 줄 한 줄 번역한 코드가 바로 기계어가 되는 것은 아니고 중간 코드(intermediate code)로 번역됩니다. 이 중간 코드는 다른 프로그램에 의하여 기계어로 번역되어 실행됩니다.
